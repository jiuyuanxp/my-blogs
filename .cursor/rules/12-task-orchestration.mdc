---
description: 任务编排 - 何时使用子代理、并行执行
alwaysApply: true
---

# 任务编排

## 何时使用 mcp_task 子代理

| 场景 | 子代理类型 | 说明 |
|------|------------|------|
| 复杂功能实现 | generalPurpose / explore | 多步骤、需探索代码库 |
| 构建错误修复 | generalPurpose | 分析错误、增量修复 |
| 代码库探索 | explore | 快速查找文件、模式 |
| Shell 操作 | shell | Git、构建、部署命令 |

## 并行执行

独立任务应并行启动：

```
# GOOD
同时启动：1) 安全分析 2) 性能审查 3) 类型检查

# BAD
先 1 再 2 再 3（无依赖时）
```

## TodoWrite 使用

多步骤任务必须使用 TodoWrite：
- 跟踪进度
- 验证理解
- 支持实时调整
- 暴露遗漏或错误粒度

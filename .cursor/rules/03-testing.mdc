---
description: 测试要求 - TDD、80% 覆盖率
alwaysApply: true
---

# 测试规范

## 最低覆盖率：80%

需覆盖的测试类型：
1. **单元测试** - 函数、工具、组件
2. **集成测试** - API、数据库操作
3. **E2E 测试** - 关键用户流程

## TDD 流程（强制）

1. 先写测试（RED）
2. 运行测试，应失败
3. 写最少实现（GREEN）
4. 运行测试，应通过
5. 重构（IMPROVE）
6. 验证覆盖率 ≥80%

## 测试失败排查

1. 检查测试隔离
2. 验证 mock 正确
3. 优先修实现，非测试（除非测试有误）
